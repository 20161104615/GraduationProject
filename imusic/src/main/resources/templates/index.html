<!DOCTYPE html>
<html lang="en" class="app" xmlns:th="http://www.thymeleaf.org">
<head th:replace="public :: public_head_head"></head>
<body class="">
<section class="vbox" style="background-color: rgba(53,255,84,0.04)">
    <div th:replace="~{public :: public_head}"></div>
    <section class="vbox">
        <section class="scrollable padder-lg-ys-1 w-f-md" id="bjax-target">
            <!-- 论播2 -->
            <div class="col-lg-12" style="margin-top: 5px;border: 20px">
                <section class="panel panel-default">
                    <div class="carousel slide auto panel-body" id="c-slide2">
                        <ol class="carousel-indicators out">
                            <li data-target="#c-slide2" data-slide-to="0" class="active"></li>
                            <li data-target="#c-slide2" data-slide-to="1" class=""></li>
                            <li data-target="#c-slide2" data-slide-to="2" class=""></li>
                            <li data-target="#c-slide2" data-slide-to="3" class=""></li>
                            <li data-target="#c-slide2" data-slide-to="4" class=""></li>
                            <li data-target="#c-slide2" data-slide-to="5" class=""></li>
                            <li data-target="#c-slide2" data-slide-to="6" class=""></li>
                        </ol>
                        <div class="carousel-inner">
                            <div id="Carousel-2-0" class="item active">
                                <h3><p class="text-center">热门歌曲</p></h3>
                                <br>
                                <p class="text-center" style="float: left;margin-left: 200px">
                                    <em class="h4 text-mute">
                                        <img th:src="${session.MusicList[0].getMusic_img()}"
                                             style="height: 270px; width: 500px"/>
                                    </em><br>
                                    <small class="text-muted"><a name="song" href="#">[[${session.MusicList[0].getMusic_name()}]]</a></small>
                                </p>
                                <p class="text-center" style="float: right;margin-right: 200px">
                                    <em class="h4 text-mute">
                                        <img th:src="${session.MusicList[1].getMusic_img()}"
                                             style="height: 270px; width: 500px"/></em><br>
                                    <small class="text-muted"><a name="song" href="#">[[${session.MusicList[1].getMusic_name()}]]</a></small>
                                </p>
                                </a>
                            </div>
                            <th:block th:each="k:${#numbers.sequence(2,7)}">
                                <div id="Carousel-2-1" class="item">
                                    <h3><p class="text-center">热门歌曲</p></h3>
                                    <br>

                                    <p class="text-center" style="float: left;margin-left: 200px">
                                        <em class="h4 text-mute"><a name="song" href="#"><img
                                                th:src="${session.MusicList[k].getMusic_img()}"
                                                style="height: 270px; width: 500px"/></a></em><br>
                                        <small class="text-muted"><a name="song" href="#">[[${session.MusicList[k].getMusic_name()}]]</a></small>
                                    </p>
                                    <p class="text-center" style="float: right;margin-right: 200px">
                                        <em class="h4 text-mute"><img
                                                th:src="${session.MusicList[k+6].getMusic_img()}"
                                                style="height: 270px; width: 500px"/></em><br>
                                        <small class="text-muted"><a name="song" href="#">[[${session.MusicList[k+6].getMusic_name()}]]</a></small>
                                    </p>
                                    </a>
                                </div>
                            </th:block>
                        </div>
                        <a class="left carousel-control" href="#c-slide2" data-slide="prev">
                            <i class="fa fa-angle-left" style="color: #2dd10d"></i>
                        </a>
                        <a class="right carousel-control" href="#c-slide2" data-slide="next">
                            <i class="fa fa-angle-right" style="color: #2dd10d"></i>
                        </a>
                    </div>
                </section>
            </div>
            <!-- /论播2 -->
            <!--主体-->
            <div class="padder-lg">
                <div class="row">
                    <div class="span6">
                        <!-- 排行榜 -->
                        <th:block th:each="i:${#numbers.sequence(0,2)}"><!--3列-->
                            <div class="col-sm-4 portlet">
                                <section class="panel panel-info portlet-item">
                                    <header class="panel-heading">
                                        歌曲榜单
                                    </header>
                                    <ul class="list-group alt">
                                        <th:block th:each="k:${#numbers.sequence(0,4)}">
                                            <li class="list-group-item">
                                                <div class="media">
                                                    <span class="pull-left thumb-sm">
                                                         <img th:src="${session.MusicList[k+i*5+1+13].getMusic_img()}"
                                                              alt="..." class="img-circle"></span>
                                                    <div class="pull-right text-success m-t-sm">
                                                        <i class="fa fa-circle"></i>
                                                    </div>
                                                    <div class="media-body ">
                                                        <div><a name="song" href="#">[[${session.MusicList[k+i*5+1+13].getMusic_name()}]]</a>
                                                        </div>
                                                        <small class="text-muted"><a name="singer" href="#">[[${session.MusicList[k+i*5+1+13].getMusic_singer()}]]</a></small>
                                                    </div>
                                                </div>
                                            </li>
                                        </th:block>
                                    </ul>
                                </section>
                            </div>
                        </th:block>
                        <!-- /排行榜 -->
                        <!--经典歌曲-->
                        <h2 class="font-thin m-b">经典歌曲
                            <span class="musicbar animate inline m-l-sm" style="width:20px;height:20px">
                                <span class="bar1 a1 bg-primary lter"></span>
                                <span class="bar2 a2 bg-info lt"></span>
                                <span class="bar3 a3 bg-success"></span>
                                <span class="bar4 a4 bg-warning dk"></span>
                                <span class="bar5 a5 bg-danger dker"></span>
                            </span>
                        </h2>
                        <div class="row row-sm"><!--重复12组-->
                            <th:block th:each="k,num:${#numbers.sequence(0,11)}">
                                <div class="col-xs-6 col-sm-4 col-md-3 col-lg-2" style="margin-bottom: 7px">
                                    <div class="item">
                                        <div class="pos-rlt">
                                            <div class="item-overlay opacity r r-2x bg-black">
                                                <div class="center text-center m-t-n">
                                                    <a name="play_song" href="#">
                                                        <i class="icon-control-play i-2x"
                                                           th:value="${session.MusicList[k+12+17].getMusic_name()}"></i></a>
                                                </div>
                                            </div>
                                            <img th:src="${session.MusicList[k+12+17].getMusic_img()}"
                                                 alt=""
                                                 class="r r-2x img-full"></a>
                                        </div>
                                        <div class="padder-v">
                                            <div class="index-list">
                                                <div class="index-list-left">
                                                    <a name="song" href="#" class="text-ellipsis">[[${session.MusicList[k+12+17].getMusic_name()}]]</a>
                                                    <div class="text-ellipsis text-xs text-muted">
                                                        <a name="singer" href="#">[[${session.MusicList[k+12+17].getMusic_singer()}]]</a>
                                                    </div>
                                                </div>
                                                <div class="index-list-rigth">
                                                    <i th:value="${session.MusicList[k+12+17].getMusic_id()}"
                                                       style="padding-left: 5px" class="icon-share-alt"></i>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </th:block>
                        </div>
                        <!--/经典歌曲-->
                        <div class="row">
                            <!--新歌首发-->
                            <div class="col-md-7">
                                <h3 class="font-thin">新歌首发
                                    <span class="musicbar animate inline m-l-sm"
                                          style="width:20px;height:20px">
                                        <span class="bar1 a1 bg-primary lter"></span>
                                        <span class="bar2 a2 bg-info lt"></span>
                                        <span class="bar3 a3 bg-success"></span>
                                        <span class="bar4 a4 bg-warning dk"></span>
                                        <span class="bar5 a5 bg-danger dker"></span>
                                    </span>
                                </h3>
                                <div class="row row-sm"><!--重复6组-->
                                    <th:block th:each="k:${#numbers.sequence(0,7)}">
                                        <div class="col-xs-6 col-sm-3">
                                            <div class="item">
                                                <div class="pos-rlt">
                                                    <div class="item-overlay opacity r r-2x bg-black">
                                                        <div class="center text-center m-t-n">
                                                            <a href="#"><i class="fa fa-play-circle i-2x"
                                                                           th:value="${session.MusicList[k+8+33].getMusic_name()}"></i></a>
                                                        </div>
                                                    </div>
                                                    <img th:src="${session.MusicList[k+8+33].getMusic_img()}" alt=""
                                                         class="r r-2x img-full">
                                                </div>
                                                <div class="padder-v">
                                                    <div class="index-list">
                                                        <div class="index-list-left"></div>
                                                        <div class="index-list-rigth">
                                                            <i th:value="${session.MusicList[k+8+33].getMusic_id()}"
                                                               style="padding-left: 5px" class="icon-share-alt"></i>
                                                        </div>
                                                    </div>
                                                    <a name="song" href="#" class="text-ellipsis text-center">[[${session.MusicList[k+8+33].getMusic_name()}]]</a>
                                                </div>
                                            </div>
                                        </div>
                                    </th:block>
                                </div>
                            </div>
                            <!--/新歌首发-->
                            <!--分类-->
                            <div class="col-md-5">
                                <h3 class="font-thin">用户分享</h3>
                                <div class="list-group bg-white list-group-lg no-bg auto">
                                    <div th:each="k,num:${session.oneMouthShare}" th:if="${num.count} le 9">
                                        <div class="list-group-item clearfix">
                                            <span class="pull-left h5  text-muted m-l"
                                                  style="padding-top: 3px">手机用户<b>[[${k.getUser_phone()}]]</b> 分享歌曲
                                            <b><a name="song" href="#">[[${k.getMusic_name()}]]</a></b>
                                            </span>
                                            <span class="pull-right">
                                                <span>
                                                    <i class="fa fa-user icon-muted"></i><a name="singer" href="#">[[${k.getMusic_singer()}]]</a>
                                                </span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--/分类-->
                        </div>
                    </div>
                </div>
            </div>
            </div>
            <!--/主体-->
        </section>
    </section>
</section>
<footer th:replace="public :: public_footer_footer"></footer>
</body>
<script th:inline="javascript">
    $(document).ready(function () {
        $(".icon-share-alt").click(function () {
            var songs = $(this);
            $.ajax({
                url: "user/share",
                type: "post",
                dataType: 'json',
                data: {
                    "songid": songs.attr("value"),
                    "tips": "index"
                },
                success: function (result) {
                    if (result.stat == 1) {
                        window.location.href = "share.html"
                    }
                },
                error: function () {
                    alert("ERROR");
                }
            });
        });

        $(".icon-control-play").click(function () {
            var playsongname = $(this);
            var loginuser = $("#loginuserphone").attr("value");
            if (loginuser != null) {
                $.ajax({
                    url: "song/musicplaylist",
                    type: "post",
                    dataType: 'json',
                    data: {
                        "playmusic": playsongname.attr("value"),
                        "userphone": loginuser
                    },
                    success: function (result) {
                        if (result.stats == 0) {
                            alert("暂无这首歌曲")
                        } else if (result.stats == 1) {
                            window.location.href = 'listen.html';
                        }
                    }
                });
            } else {
                alert("请先登录");
            }
        });

        $(".fa-play-circle").click(function () {
            var playsongname = $(this);
            var loginuser = $("#loginuserphone").attr("value");
            if (loginuser != null) {
                $.ajax({
                    url: "song/musicplaylist",
                    type: "post",
                    dataType: 'json',
                    data: {
                        "playmusic": playsongname.attr("value"),
                        "userphone": loginuser
                    },
                    success: function (result) {
                        if (result.stats == 0) {
                            alert("暂无这首歌曲")
                        } else if (result.stats == 1) {
                            window.location.href = 'listen.html';
                        }
                    }
                });
            } else {
                alert("请先登录");
            }
        });
    });
</script>
</html>